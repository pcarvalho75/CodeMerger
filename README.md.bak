<p align="center">
  <img src="logo.png" alt="CodeMerger Logo" width="200">
</p>

# CodeMerger

**A semantic MCP server for C# projects — built for developers who use Visual Studio and Claude.**

CodeMerger gives Claude deep understanding of your C# codebase through the Model Context Protocol (MCP). Unlike generic code assistants that treat your project as plain text, CodeMerger uses **Roslyn** (the same compiler platform that powers Visual Studio) to provide semantic analysis, intelligent refactoring, and project-aware code navigation.

## Why CodeMerger?

### Built for Visual Studio Developers

If you work in Visual Studio with WPF, WinForms, ASP.NET, or any C# project, you know the pain of AI assistants that don't understand:

- **XAML files** and their code-behind relationships
- **Namespace structure** and how your project is organized
- **NuGet packages** and their versions
- **Project references** and dependencies between types
- **The actual compilation** — not just syntax, but real build errors

CodeMerger solves this. It runs `dotnet build` to catch real errors, understands your type hierarchy, and can refactor symbols across your entire solution.

### Roslyn-Powered Intelligence

- **Semantic search**: Find types and methods by meaning, not just text
- **Dependency analysis**: See what uses a class before you change it
- **Call graph**: Understand who calls what
- **Real diagnostics**: Actual compiler errors and warnings, not guesses

### Safe Refactoring

- **Rename symbols** across all files with preview
- **Move files** and update all `using` statements
- **Add parameters** to methods and update all call sites
- **Generate interfaces**, constructors, and implementations
- **Automatic backups** before every change

## Features

| Category | Tools |
|----------|-------|
| **Exploration** | `get_project_overview`, `list_files`, `get_context` |
| **Search** | `search_code`, `grep`, `find_references` |
| **Understanding** | `get_type`, `get_dependencies`, `get_callers`, `get_callees`, `get_type_hierarchy` |
| **Editing** | `str_replace`, `write_file`, `get_lines`, `preview_write`, `undo` |
| **Refactoring** | `rename_symbol`, `move_file`, `add_parameter`, `extract_method`, `generate_interface`, `generate_constructor`, `implement_interface` |
| **Validation** | `get_diagnostics`, `build` |
| **Server** | `list_projects`, `switch_project`, `refresh`, `shutdown` |

## Installation

### Requirements

- Windows 10/11
- .NET 8.0 Runtime
- Claude Desktop

### Setup

1. **Download** the latest release from [Releases](https://github.com/pcarvalho75/CodeMerger/releases)

2. **Extract** to a folder (e.g., `C:\Tools\CodeMerger`)

3. **Configure Claude Desktop** by editing `%APPDATA%\Claude\claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "codemerger": {
      "command": "C:\\Tools\\CodeMerger\\CodeMerger.exe",
      "args": []
    }
  }
}
```

4. **Restart Claude Desktop**

5. **Add your projects** in CodeMerger's UI — the server will index them automatically

## Usage

Once configured, Claude can use CodeMerger tools directly. Examples:

**Explore a project:**
> "Switch to my PatternLab project and give me an overview"

**Find and understand code:**
> "Search for all classes that implement IDataProcessor"
> "Show me what depends on the FileParser class"

**Make changes safely:**
> "Rename the method ProcessData to ProcessDataAsync across the project"
> "Add a CancellationToken parameter to all async methods in the Services namespace"

**Validate your code:**
> "Build the project and show me any errors"

## Why Not Just Use Claude Code?

Claude Code is excellent for JavaScript/TypeScript and Python ecosystems. But if you're a **.NET developer working in Visual Studio**, you need:

- **XAML compilation** — CodeMerger runs real MSBuild
- **WPF/WinForms understanding** — knows about code-behind patterns
- **NuGet package awareness** — respects existing package versions
- **Windows-native experience** — WPF app that feels at home

CodeMerger complements Claude Code for teams that work across stacks.

## Configuration

Projects are stored in `%APPDATA%\CodeMerger\workspaces.json`. You can:

- Add multiple projects
- Switch between them without restarting (`switch_project`)
- Clone Git repositories directly from the UI

## Building from Source

```bash
git clone https://github.com/pcarvalho75/CodeMerger.git
cd CodeMerger
dotnet build
```

Requires:
- .NET 8.0 SDK
- Windows (WPF dependency)

## License

Apache License 2.0 — see [LICENSE](LICENSE) for details.

## Author

**Paulo Costa Carvalho** ([@pcarvalho75](https://github.com/pcarvalho75))

Principal Investigator at Fiocruz, Brazil. Building tools for computational proteomics and whatever else seems interesting.

---

*CodeMerger is not affiliated with Anthropic. It's an independent tool that implements the Model Context Protocol.*
