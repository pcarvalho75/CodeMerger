<Window x:Class="CodeMerger.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        xmlns:controls="clr-namespace:CodeMerger.Controls"
        mc:Ignorable="d"
        Title="CodeMerger" Height="800" Width="1100"
        WindowStartupLocation="CenterScreen"
        Background="#1a1a2e">
    <Window.Resources>
    </Window.Resources>

    <Grid x:Name="mainGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- System Tray Icon -->
        <tb:TaskbarIcon x:Name="trayIcon"
                        ToolTipText="CodeMerger â€” Idle"
                        TrayMouseDoubleClick="TrayIcon_DoubleClick">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Open CodeMerger" Click="TrayOpen_Click" FontWeight="Bold"/>
                    <Separator/>
                    <MenuItem Header="Exit" Click="TrayExit_Click"/>
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>

        <!-- HEADER BAR -->
        <controls:HeaderBar x:Name="headerBar" Grid.Row="0"/>

        <!-- Info Banner -->
        <Border x:Name="recommendationBanner" Grid.Row="1" Background="#2a2a4a" Padding="16,12" Visibility="Collapsed">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="ðŸ’¡" FontSize="16" VerticalAlignment="Center" Margin="0,0,12,0"/>
                <TextBlock x:Name="recommendationText" Grid.Column="1" TextWrapping="Wrap" Foreground="{StaticResource TextPrimary}" VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- MCP Activity Strip -->
        <controls:ActivityStrip x:Name="activityStrip" Grid.Row="2"/>

        <!-- MAIN CONTENT -->
        <Grid Grid.Row="3" Margin="24,20">
            <Border Background="{StaticResource BackgroundCard}" CornerRadius="12" Padding="20">
                <TabControl Background="Transparent" BorderThickness="0">
                    <TabControl.Resources>
                        <Style TargetType="TabItem">
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
                            <Setter Property="Padding" Value="16,8"/>
                            <Setter Property="FontSize" Value="14"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="TabItem">
                                        <Border x:Name="Border" Background="Transparent" BorderThickness="0,0,0,2" BorderBrush="Transparent" Padding="{TemplateBinding Padding}" Margin="0,0,8,0">
                                            <ContentPresenter ContentSource="Header" HorizontalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource AccentPrimary}"/>
                                                <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
                                                <Setter Property="FontWeight" Value="SemiBold"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </TabControl.Resources>

                    <!-- Tab 1: Source Directories -->
                    <TabItem Header="ðŸ“ Source Directories">
                        <controls:SourceDirectoriesTab x:Name="sourceDirectoriesTab"/>
                    </TabItem>

                    <!-- Tab 2: Found Files -->
                    <TabItem Header="ðŸ“„ Found Files">
                        <controls:FoundFilesTab x:Name="foundFilesTab"/>
                    </TabItem>

                    <!-- Tab 3: Lessons -->
                    <TabItem Header="ðŸ“š Lessons">
                        <controls:LessonsTab x:Name="lessonsTab"/>
                    </TabItem>

                    <!-- Tab 4: Parameters -->
                    <TabItem Header="âš™ Parameters">
                        <controls:ParametersTab x:Name="parametersTab"/>
                    </TabItem>

                    <!-- Tab 5: Activity Log -->
                    <TabItem Header="ðŸ“Š Activity Log">
                        <controls:ActivityLogTab x:Name="activityLogTab"/>
                    </TabItem>
                </TabControl>
            </Border>
        </Grid>

        <!-- BOTTOM BAR -->
        <controls:BottomBar x:Name="bottomBar" Grid.Row="4"/>

        <!-- STATUS BAR -->
        <controls:StatusBar x:Name="statusBar" Grid.Row="5"/>

    </Grid>
</Window>
